<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>应用树</title>
    <link rel="stylesheet" href="/common/open-source/ztree/zTreeStyle/zTreeStyle.css">
    <link rel="stylesheet" href="/common/common.css">
    <script src="/common/open-source/jquery/jquery.min.js"></script>
    <script src="/common/open-source/ztree/jquery.ztree.all.js"></script>
    <script src="/common/common.js"></script>
    <style>
        .applicationTree-container{
            padding: 15px;
        }
    </style>
</head>
<body>
    <div class="applicationTree-container">
        <ul id="applicationTree" class="ztree"></ul>
    </div>
    <script>
        $(function(){
            applicationTree();
        });
        function applicationTree(){
            common.ajax({
                url:"/TSApplicationController/searchTSApplicationTree",
                success:function(data){
                    $.fn.zTree.init($("#applicationTree"), setting, data.object);
                }
            });
        }
        var setting = {
            callback: {
                onClick: onClick,
                onCheck: onClick
            },
            check: {
                enable: true
            },
            data: {
                simpleData: {
                    enable: true
                }
            }
        };
        function checkOne(selelctId){
            var tree = $.fn.zTree.getZTreeObj('applicationTree');
            tree.checkAllNodes(false);		//取消全部勾选
            tree.checkNode(tree.getNodeByParam("id", selelctId), true);
        }
        function onClick(event, treeId, treeNode) {
            var selelctId = treeNode.id;
            checkOne(selelctId);
        }
        function getTSApplicationCheckedNodes(){
            var tree = $.fn.zTree.getZTreeObj('applicationTree');
            var nodes = tree.getCheckedNodes(true);
            return nodes;
        }
    </script>
</body>
</html>